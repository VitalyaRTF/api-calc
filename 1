const Hapi = require('@hapi/hapi');
const Inert = require('@hapi/inert');
const Vision = require('@hapi/vision');
const HapiSwagger = require('hapi-swagger');

const init = async () => {
const server = Hapi.server({
port: 3000,
host: '0.0.0.0', // Можно использовать 'localhost' для локальной разработки
});

// Регистрация плагинов Inert и Vision для обработки статических файлов и работы с шаблонами
await server.register([Inert, Vision]);

// Настройка Swagger для создания документации API
const swaggerOptions = {
info: {
title: 'Калькулятор API',
version: '1.0.0',
},
};

await server.register([
{
plugin: HapiSwagger,
options: swaggerOptions,
},
]);

// Определение маршрутов для вашего калькулятора
server.route({
method: 'GET',
path: '/add/{a}/{b}',
handler: (request, h) => {
const { a, b } = request.params;
const result = parseFloat(a) + parseFloat(b);
return { result };
},
});

// Запуск сервера
await server.start();
console.log('Сервер запущен на', server.info.uri);
};

init();
